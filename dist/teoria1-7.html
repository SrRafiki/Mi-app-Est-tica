<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1.7 Teorema de Varignon</title>
  <link rel="stylesheet" href="estilos.css">
</head>
<body>
  <header>
    <h1>1.7 Teorema de Varignon</h1>
  </header>

  <div class="container">
    <a href="index.html" class="btn btn-back">‚Üê Volver al men√∫ principal</a>

    <div class="card">
      <h2>üìå Teor√≠a</h2>
      <p><strong>Teorema de Varignon:</strong></p>
      <blockquote>
        ‚ÄúEl momento de la resultante de un sistema de fuerzas concurrentes respecto a un punto es igual a la suma algebraica de los momentos de las fuerzas componentes respecto al mismo punto.‚Äù
      </blockquote>
      <p>Matem√°ticamente: <code>M‚Çí(R) = Œ£M‚Çí(F·µ¢)</code></p>
    </div>

    <!-- ‚úÖ Diagrama SVG din√°mico -->
    <div class="diagram">
      <h3>üîç Diagrama: Verificaci√≥n del teorema</h3>
      <svg width="300" height="200" viewBox="-20 -20 320 220" id="diagrama-varignon">
        <!-- Punto O (origen) -->
        <circle cx="50" cy="150" r="5" fill="#2c3e50" />
        <text x="40" y="140" class="vector-label">O</text>
        
        <!-- Punto A (aplicaci√≥n de fuerzas) -->
        <circle cx="50" cy="50" r="4" fill="#e74c3c" />
        <text x="60" y="45" class="vector-label">A</text>
        
        <!-- Vector posici√≥n desde O a A -->
        <line x1="50" y1="150" x2="50" y2="50" stroke="#9b59b6" stroke-width="1.5" stroke-dasharray="4,4" id="vector-posicion" />
        <text x="30" y="100" fill="#9b59b6">r = (0, -5) m</text>
        
        <!-- Fuerza F‚ÇÅ (eje x) -->
        <line x1="50" y1="50" x2="120" y2="50" stroke="#3498db" stroke-width="2" marker-end="url(#arrowhead-blue)" id="fuerza1" />
        <text x="85" y="40" fill="#3498db">F‚ÇÅ = 30 N</text>
        
        <!-- Fuerza F‚ÇÇ (eje y) -->
        <line x1="50" y1="50" x2="50" y2="0" stroke="#e74c3c" stroke-width="2" marker-end="url(#arrowhead-red)" id="fuerza2" />
        <text x="25" y="25" fill="#e74c3c">F‚ÇÇ = 40 N</text>
        
        <!-- Resultante R -->
        <line x1="50" y1="50" x2="120" y2="0" stroke="#27ae60" stroke-width="2.5" marker-end="url(#arrowhead-green)" id="resultante" />
        <text x="130" y="105" fill="#27ae60">R</text>
        
        <!-- Definici√≥n de marcadores -->
        <defs>
          <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#3498db" />
          </marker>
          <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#e74c3c" />
          </marker>
          <marker id="arrowhead-green" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto">
            <polygon points="0 0, 12 4, 0 8" fill="#27ae60" />
          </marker>
        </defs>
      </svg>
    </div>

    <!-- ‚úÖ Bot√≥n y formulario de texto libre -->
    <button id="btn-custom" class="btn btn-toggle">‚úèÔ∏è Resolver TU problema</button>
    <div id="custom-form" style="display:none;" class="custom-problem">
      <h3>Escribe tu enunciado:</h3>
      <textarea id="custom-statement" class="custom-input" placeholder="Ej: Dos fuerzas act√∫an en el punto A(0,0): F‚ÇÅ = 30 N en direcci√≥n +x y F‚ÇÇ = 40 N en direcci√≥n +y. Calcula el momento total respecto al punto B(0, 5 m)." rows="3"></textarea>
      <button id="save-btn" class="btn">üöÄ Calcular y aplicar</button>
      <div id="custom-saved" class="custom-saved"></div>
    </div>

    <div class="problem-structured">
      <div class="problem-section enunciado">
        <h3>üìå Enunciado</h3>
        <p id="enunciado-texto">Dos fuerzas act√∫an en el punto A(0,0): F‚ÇÅ = 30 N en direcci√≥n +x y F‚ÇÇ = 40 N en direcci√≥n +y. Calcula el momento total respecto al punto B(0, 5 m).</p>
      </div>

      <div class="problem-section datos">
        <h3>üìä Datos</h3>
        <ul>
          <li><code>F‚ÇÅ = 30 N i</code></li>
          <li><code>F‚ÇÇ = 40 N j</code></li>
          <li><code>r = (0, -5) m</code></li>
        </ul>
      </div>

      <div class="problem-section formula">
        <h3>üßÆ F√≥rmulas</h3>
        <ul>
          <li><code>M = x¬∑F·µß - y¬∑F‚Çì</code></li>
          <li><code>M_total = M‚ÇÅ + M‚ÇÇ</code></li>
        </ul>
      </div>

      <div class="problem-section sustitucion">
        <h3>‚úèÔ∏è Sustituci√≥n</h3>
        <p><code>M_B(F‚ÇÅ) = 0 - (-5)(30) = 150 N¬∑m</code></p>
        <p><code>M_B(F‚ÇÇ) = (0)(40) - (-5)(0) = 0 N¬∑m</code></p>
        <p><code>M_total = 150 + 0 = 150 N¬∑m</code></p>
        <p><code>M_B(R) = mismo valor ‚Üí ‚úîÔ∏è Teorema confirmado</code></p>
      </div>

      <div class="problem-section resultado">
        <h3>‚úÖ Resultado</h3>
        <p class="resultado-final"><strong>M = 150 N¬∑m</strong><br><small>‚úÖ Teorema de Varignon verificado</small></p>
      </div>
    </div>
  </div>

  <footer>
    <p>üéì Proyecto acad√©mico ‚Äî F√≠sica General | Est√°tica</p>
  </footer>

  <script src="script.js"></script>
  <script>
  // ‚ñ∂Ô∏è Funci√≥n para actualizar el diagrama SVG
  function actualizarDiagrama(F1, F2, d) {
    const svg = document.getElementById('diagrama-varignon');
    const fuerza1 = document.getElementById('fuerza1');
    const fuerza2 = document.getElementById('fuerza2');
    const resultante = document.getElementById('resultante');
    const textoF1 = document.querySelector('#fuerza1 + text');
    const textoF2 = document.querySelector('#fuerza2 + text');
    const vectorPosicion = document.getElementById('vector-posicion');
    const textoVector = document.querySelector('#vector-posicion + text');

    // Actualizar texto de las fuerzas
    textoF1.textContent = `F‚ÇÅ = ${F1} N`;
    textoF2.textContent = `F‚ÇÇ = ${F2} N`;

    // Actualizar vector posici√≥n (siempre vertical)
    vectorPosicion.setAttribute('x1', 50);
    vectorPosicion.setAttribute('y1', 150);
    vectorPosicion.setAttribute('x2', 50);
    vectorPosicion.setAttribute('y2', 50);
    textoVector.textContent = `r = (0, -${d}) m`;

    // Actualizar resultante (opcional)
    const R = Math.sqrt(F1*F1 + F2*F2);
    const theta = Math.atan2(F2, F1) * 180 / Math.PI;
    const xR = 50 + 60 * Math.cos(theta * Math.PI / 180);
    const yR = 50 - 60 * Math.sin(theta * Math.PI / 180);

    resultante.setAttribute('x1', 50);
    resultante.setAttribute('y1', 50);
    resultante.setAttribute('x2', xR);
    resultante.setAttribute('y2', yR);
  }

  // ‚ñ∂Ô∏è Funci√≥n para procesar el enunciado
  document.getElementById('save-btn')?.addEventListener('click', function(e) {
    e.preventDefault();
    const enunciado = document.getElementById('custom-statement')?.value.trim();

    if (!enunciado) {
      alert('‚ö†Ô∏è Por favor, escribe un enunciado.');
      return;
    }

    try {
      // ‚ñ∂Ô∏è Extraer F1, F2, d con expresiones regulares
      const patterns = [
        /dos\s+fuerzas\s+act√∫an\s+en\s+el\s+punto\s+A\(0,0\):\s+F‚ÇÅ\s*=\s*(\d+\.?\d*)\s*N\s+en\s+direcci√≥n\s+\+x\s+y\s+F‚ÇÇ\s*=\s*(\d+\.?\d*)\s*N\s+en\s+direcci√≥n\s+\+y\.\s+Calcula\s+el\s+momento\s+total\s+respecto\s+al\s+punto\s+B\(0,\s*(\d+\.?\d*)\s*m\)/i,
        /fuerzas\s*:\s*F‚ÇÅ\s*=\s*(\d+\.?\d*)\s*N\s+i,\s*F‚ÇÇ\s*=\s*(\d+\.?\d*)\s*N\s+j,\s*punto\s*B\s*:\s*\(\s*0,\s*(\d+\.?\d*)\s*m\)/i,
        /dos\s+fuerzas\s+de\s+(\d+\.?\d*)\s+N\s+y\s+(\d+\.?\d*)\s+N\s+en\s+los\s+ejes\s+x\s+y\s+respectivamente,\s+respecto\s+al\s+punto\s+B\(0,\s*(\d+\.?\d*)\s*m\)/i
      ];

      let F1 = null, F2 = null, d = null;
      for (const p of patterns) {
        const match = enunciado.match(p);
        if (match) { F1 = parseFloat(match[1]); F2 = parseFloat(match[2]); d = parseFloat(match[3]); break; }
      }

      if (F1 === null || F2 === null || d === null) {
        throw new Error('No se encontraron los valores. Usa:\n- "Dos fuerzas act√∫an en el punto A(0,0): F‚ÇÅ = 30 N en direcci√≥n +x y F‚ÇÇ = 40 N en direcci√≥n +y. Calcula el momento total respecto al punto B(0, 5 m)."');
      }

      // ‚ñ∂Ô∏è Calcular momentos
      const M1 = 0 - (-d) * F1; // M_B(F‚ÇÅ) = x¬∑F·µß - y¬∑F‚Çì = 0 - (-d)¬∑F1
      const M2 = 0 - (-d) * 0; // M_B(F‚ÇÇ) = x¬∑F·µß - y¬∑F‚Çì = 0 - (-d)¬∑0 = 0
      const M_total = M1 + M2;

      // ‚ñ∂Ô∏è Actualizar enunciado
      document.getElementById('enunciado-texto').innerHTML = 
        `Dos fuerzas act√∫an en el punto A(0,0): <strong>F‚ÇÅ = ${F1} N</strong> en direcci√≥n +x y <strong>F‚ÇÇ = ${F2} N</strong> en direcci√≥n +y. Calcula el momento total respecto al punto B(0, ${d} m).`;

      // ‚ñ∂Ô∏è Actualizar datos
      document.querySelector('.problem-section.datos ul').innerHTML = `
        <li><code>F‚ÇÅ = ${F1} N i</code></li>
        <li><code>F‚ÇÇ = ${F2} N j</code></li>
        <li><code>r = (0, -${d}) m</code></li>
      `;

      // ‚ñ∂Ô∏è Actualizar f√≥rmulas
      document.querySelector('.problem-section.formula').innerHTML = `
        <h3>üßÆ F√≥rmulas</h3>
        <ul>
          <li><code>M = x¬∑F·µß - y¬∑F‚Çì</code></li>
          <li><code>M_total = M‚ÇÅ + M‚ÇÇ</code></li>
        </ul>
      `;

      // ‚ñ∂Ô∏è Actualizar sustituci√≥n
      document.querySelector('.problem-section.sustitucion').innerHTML = `
        <h3>‚úèÔ∏è Sustituci√≥n</h3>
        <p><code>M_B(F‚ÇÅ) = 0 - (-${d})(${F1}) = ${M1} N¬∑m</code></p>
        <p><code>M_B(F‚ÇÇ) = (0)(${F2}) - (-${d})(0) = ${M2} N¬∑m</code></p>
        <p><code>M_total = ${M1} + ${M2} = ${M_total} N¬∑m</code></p>
        <p><code>M_B(R) = mismo valor ‚Üí ‚úîÔ∏è Teorema confirmado</code></p>
      `;

      // ‚ñ∂Ô∏è Actualizar resultado final
      document.querySelector('.resultado-final').innerHTML = 
        `<strong>M = ${M_total} N¬∑m</strong><br><small>‚úÖ Teorema de Varignon verificado</small>`;

      // ‚ñ∂Ô∏è Actualizar diagrama
      actualizarDiagrama(F1, F2, d);

      // ‚ñ∂Ô∏è Ocultar formulario
      document.getElementById('custom-form').style.display = 'none';
      alert('‚úÖ ¬°Problema actualizado con tus valores!');
    } catch (error) {
      console.error('‚ùå Error:', error);
      alert(`‚ö†Ô∏è Error al procesar tu enunciado.\nFormatos v√°lidos:\n- "Dos fuerzas act√∫an en el punto A(0,0): F‚ÇÅ = 30 N en direcci√≥n +x y F‚ÇÇ = 40 N en direcci√≥n +y. Calcula el momento total respecto al punto B(0, 5 m)."`);
    }
  });
  </script>
</body>
</html>