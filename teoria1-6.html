<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1.6 Momento de una fuerza</title>
  <link rel="stylesheet" href="estilos.css">
</head>
<body>
  <header>
    <h1>1.6 Momento de una fuerza<br><small>respecto a un punto</small></h1>
  </header>

  <div class="container">
    <a href="index.html" class="btn btn-back">â† Volver al menÃº principal</a>

    <div class="card">
      <h2>ğŸ“Œ TeorÃ­a</h2>
      <p>El <strong>momento</strong> (o torque) de una fuerza <strong>F</strong> respecto a un punto <em>O</em> mide su tendencia a causar rotaciÃ³n.</p>
      <p><strong>FÃ³rmula escalar (2D):</strong>  
        <code>Mâ‚’ = Â± F Â· d Â· senÎ¸</code>  
        donde <code>d</code> = brazo de palanca (distancia perpendicular de <em>O</em> a la lÃ­nea de acciÃ³n de <strong>F</strong>).  
        Signo: (+) â†’ giro antihorario, (â€“) â†’ horario.</p>
    </div>

    <!-- âœ… Diagrama SVG dinÃ¡mico -->
    <div class="diagram">
      <h3>ğŸ” Diagrama: Fuerza aplicada a una llave</h3>
      <svg width="400" height="180" viewBox="-20 -20 420 200" id="diagrama-momento">
        <!-- Punto O (tornillo) -->
        <circle cx="50" cy="100" r="8" fill="#2c3e50" />
        <text x="42" y="88" class="vector-label">O</text>
        
        <!-- Llave (brazo) -->
        <rect x="50" y="96" width="250" height="8" fill="#95a5a6" rx="4" />
        
        <!-- Fuerza F (perpendicular) -->
        <line x1="300" y1="100" x2="300" y2="40" class="force-line" stroke="#3498db" stroke-width="2" marker-end="url(#arrowhead-blue)" id="fuerza" />
        <text x="310" y="70" fill="#3498db" id="texto-f">F = 50 N</text>
        
        <!-- Brazo d (lÃ­nea doble con flechas) -->
        <line x1="50" y1="115" x2="300" y2="115" stroke="#9b59b6" stroke-width="1.5" id="brazo-d" />
        <polygon points="50,112 45,115 50,118" fill="#9b59b6" />
        <polygon points="300,112 305,115 300,118" fill="#9b59b6" />
        <text x="160" y="135" class="vector-label" fill="#9b59b6" id="texto-d">d = 0.3 m</text>
        
        <!-- Arco de giro (opcional) -->
        <path d="M60,90 A40,40 0 0 1 90,60" fill="none" stroke="#27ae60" stroke-width="2" stroke-dasharray="5,3" id="arco-giro" />
        <text x="95" y="55" class="vector-label" fill="#27ae60" id="texto-arco">â†º</text>
        
        <!-- DefiniciÃ³n de marcadores -->
        <defs>
          <marker id="arrowhead-blue" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#3498db" />
          </marker>
        </defs>
      </svg>
    </div>

    <!-- âœ… BotÃ³n y formulario de texto libre -->
    <button id="btn-custom" class="btn btn-toggle">âœï¸ Resolver TU problema</button>
    <div id="custom-form" style="display:none;" class="custom-problem">
      <h3>Escribe tu enunciado:</h3>
      <textarea id="custom-statement" class="custom-input" placeholder="Ej: F = 50 N, d = 0.3 m, Î¸ = 90Â°" rows="3"></textarea>
      <button id="save-btn" class="btn">ğŸš€ Calcular y aplicar</button>
      <div id="custom-saved" class="custom-saved"></div>
    </div>

    <div class="problem-structured">
      <div class="problem-section enunciado">
        <h3>ğŸ“Œ Enunciado</h3>
        <p id="enunciado-texto">Una fuerza de 50 N se aplica perpendicularmente al extremo de una llave de 0.3 m.</p>
      </div>

      <div class="problem-section datos">
        <h3>ğŸ“Š Datos</h3>
        <ul>
          <li><code>F = 50 N</code></li>
          <li><code>d = 0.3 m</code></li>
          <li><code>Î¸ = 90Â°</code></li>
          <li><code>sen90Â° = 1</code></li>
        </ul>
      </div>

      <div class="problem-section formula">
        <h3>ğŸ§® FÃ³rmula</h3>
        <p><code>Mâ‚’ = F Â· d Â· senÎ¸</code></p>
      </div>

      <div class="problem-section sustitucion">
        <h3>âœï¸ SustituciÃ³n</h3>
        <p><code>Mâ‚’ = (50 N) Ã— (0.3 m) Ã— (1)</code></p>
        <p><code>Mâ‚’ = 15 NÂ·m</code></p>
      </div>

      <div class="problem-section resultado">
        <h3>âœ… Resultado</h3>
        <p class="resultado-final"><strong>M = 15 NÂ·m</strong> (sentido antihorario)</p>
      </div>
    </div>
  </div>

  <footer>
    <p>ğŸ“ Proyecto acadÃ©mico â€” FÃ­sica General | EstÃ¡tica</p>
  </footer>

  <script src="script.js"></script>
  <script>
  // â–¶ï¸ FunciÃ³n para actualizar el diagrama SVG
  function actualizarDiagrama(F, d, Î¸) {
    const svg = document.getElementById('diagrama-momento');
    const fuerza = document.getElementById('fuerza');
    const textoF = document.getElementById('texto-f');
    const brazoD = document.getElementById('brazo-d');
    const textoD = document.getElementById('texto-d');
    const arcoGiro = document.getElementById('arco-giro');
    const textoArco = document.getElementById('texto-arco');

    // Calcular coordenadas de la fuerza (siempre perpendicular)
    const xF = 300;
    const yF = 100 - 60 * Math.sin(Î¸ * Math.PI / 180); // Ajusta la altura segÃºn el Ã¡ngulo

    // Actualizar lÃ­nea de la fuerza
    fuerza.setAttribute('x1', xF);
    fuerza.setAttribute('y1', 100);
    fuerza.setAttribute('x2', xF);
    fuerza.setAttribute('y2', yF);

    // Actualizar texto de la fuerza
    textoF.textContent = `F = ${F} N`;

    // Actualizar brazo d (lÃ­nea horizontal)
    brazoD.setAttribute('x1', 50);
    brazoD.setAttribute('y1', 115);
    brazoD.setAttribute('x2', 50 + d * 200); // Escala: 1 m = 200 px
    textoD.textContent = `d = ${d} m`;

    // Actualizar arco de giro (opcional)
    if (Î¸ > 0 && Î¸ < 180) {
      arcoGiro.style.display = 'block';
      textoArco.textContent = 'â†º'; // Antihorario
    } else {
      arcoGiro.style.display = 'none';
      textoArco.textContent = '';
    }

    // Ajustar posiciÃ³n del texto del arco
    textoArco.setAttribute('x', 95);
    textoArco.setAttribute('y', 55);
  }

  // â–¶ï¸ FunciÃ³n para procesar el enunciado
  document.getElementById('save-btn')?.addEventListener('click', function(e) {
    e.preventDefault();
    const enunciado = document.getElementById('custom-statement')?.value.trim();

    if (!enunciado) {
      alert('âš ï¸ Por favor, escribe un enunciado.');
      return;
    }

    try {
      // â–¶ï¸ Extraer F, d, Î¸ con expresiones regulares (formatos flexibles)
      const patterns = [
        /F\s*=\s*(\d+\.?\d*)\s*N\s*,\s*d\s*=\s*(\d+\.?\d*)\s*m\s*,\s*Î¸\s*=\s*(\d+\.?\d*)Â°/i,
        /una\s+fuerza\s+de\s+(\d+\.?\d*)\s+N\s+aplicada\s+a\s+(\d+\.?\d*)\s+m\s+con\s+Ã¡ngulo\s+de\s+(\d+\.?\d*)Â°/i,
        /fuerza\s*:\s*(\d+\.?\d*)\s*N\s*,\s*brazo\s*:\s*(\d+\.?\d*)\s*m\s*,\s*Ã¡ngulo\s*:\s*(\d+\.?\d*)Â°/i,
        /una\s+fuerza\s+de\s+(\d+\.?\d*)\s+N\s+se\s+aplica\s+perpendicularmente\s+al\s+extremo\s+de\s+una\s+llave\s+de\s+(\d+\.?\d*)\s+m/i
      ];

      let F = null, d = null, Î¸ = null;
      for (const p of patterns) {
        const match = enunciado.match(p);
        if (match) { F = parseFloat(match[1]); d = parseFloat(match[2]); Î¸ = parseFloat(match[3]) || 90; break; }
      }

      if (F === null || d === null || Î¸ === null) {
        throw new Error('No se encontraron los valores. Usa:\n- "F = 50 N, d = 0.3 m, Î¸ = 90Â°"\n- "Una fuerza de 50 N aplicada a 0.3 m con Ã¡ngulo de 90Â°"');
      }

      const M = F * d * Math.sin(Î¸ * Math.PI / 180);
      const sentido = M >= 0 ? 'antihorario' : 'horario';

      // â–¶ï¸ Actualizar enunciado
      document.getElementById('enunciado-texto').innerHTML = 
        `Una fuerza de <strong>${F} N</strong> se aplica a <strong>${d} m</strong> del punto O con un Ã¡ngulo de <strong>${Î¸}Â°</strong>.`;

      // â–¶ï¸ Actualizar datos
      document.querySelector('.problem-section.datos ul').innerHTML = `
        <li><code>F = ${F} N</code></li>
        <li><code>d = ${d} m</code></li>
        <li><code>Î¸ = ${Î¸}Â°</code></li>
        <li><code>sen${Î¸}Â° = ${(Math.sin(Î¸ * Math.PI / 180)).toFixed(3)}</code></li>
      `;

      // â–¶ï¸ Actualizar fÃ³rmula
      document.querySelector('.problem-section.formula').innerHTML = `
        <h3>ğŸ§® FÃ³rmula</h3>
        <p><code>Mâ‚’ = F Â· d Â· senÎ¸</code></p>
      `;

      // â–¶ï¸ Actualizar sustituciÃ³n
      document.querySelector('.problem-section.sustitucion').innerHTML = `
        <h3>âœï¸ SustituciÃ³n</h3>
        <p><code>Mâ‚’ = (${F}) Ã— (${d}) Ã— ${(Math.sin(Î¸ * Math.PI / 180)).toFixed(3)} = ${M.toFixed(2)} NÂ·m</code></p>
      `;

      // â–¶ï¸ Actualizar resultado final
      document.querySelector('.resultado-final').innerHTML = 
        `<strong>M = ${M.toFixed(2)} NÂ·m</strong><br><small>(sentido ${sentido})</small>`;

      // â–¶ï¸ Actualizar diagrama
      actualizarDiagrama(F, d, Î¸);

      // â–¶ï¸ Ocultar formulario
      document.getElementById('custom-form').style.display = 'none';
      alert('âœ… Â¡Problema actualizado con tus valores!');
    } catch (error) {
      console.error('âŒ Error:', error);
      alert(`âš ï¸ Error al procesar tu enunciado.\nFormatos vÃ¡lidos:\n- "F = 50 N, d = 0.3 m, Î¸ = 90Â°"\n- "Una fuerza de 50 N aplicada a 0.3 m con Ã¡ngulo de 90Â°"`);
    }
  });
  </script>
</body>
</html>